/**
 * termynal.js
 * A lightweight, modern and extensible animated terminal window, using
 * async/await.
 *
 * @author Ines Montani <ines@ines.io>
 * @version 0.0.1
 * @license MIT
 */'use strict';function _asyncToGenerator(i){return function(){var j=i.apply(this,arguments);return new Promise(function(k,l){function m(n,o){try{var p=j[n](o),q=p.value}catch(r){return void l(r)}return p.done?void k(q):Promise.resolve(q).then(function(r){m('next',r)},function(r){m('throw',r)})}return m('next')})}}var _createClass=function(){function i(j,k){for(var l,m=0;m<k.length;m++)l=k[m],l.enumerable=l.enumerable||!1,l.configurable=!0,'value'in l&&(l.writable=!0),Object.defineProperty(j,l.key,l)}return function(j,k,l){return k&&i(j.prototype,k),l&&i(j,l),j}}();function _toConsumableArray(i){if(Array.isArray(i)){for(var j=0,k=Array(i.length);j<i.length;j++)k[j]=i[j];return k}return Array.from(i)}function _classCallCheck(i,j){if(!(i instanceof j))throw new TypeError('Cannot call a class as a function')}var Termynal=function(){function i(){var j=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'#termynal',k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,i),this.container='string'==typeof j?document.querySelector(j):j,this.pfx='data-'+(k.prefix||'ty'),this.startDelay=k.startDelay||parseFloat(this.container.getAttribute(this.pfx+'-startDelay'))||600,this.typeDelay=k.typeDelay||parseFloat(this.container.getAttribute(this.pfx+'-typeDelay'))||90,this.lineDelay=k.lineDelay||parseFloat(this.container.getAttribute(this.pfx+'-lineDelay'))||1500,this.progressLength=k.progressLength||parseFloat(this.container.getAttribute(this.pfx+'-progressLength'))||40,this.progressChar=k.progressChar||this.container.getAttribute(this.pfx+'-progressChar')||'\u2588',this.cursor=k.cursor||this.container.getAttribute(this.pfx+'-cursor')||'\u258B',k.noInit||this.init()}return _createClass(i,[{key:'init',value:function(){this.lines=[].concat(_toConsumableArray(this.container.querySelectorAll('['+this.pfx+']')));var k=getComputedStyle(this.container);this.container.style.width=k.width,this.container.style.minHeight=k.height,this.container.setAttribute('data-termynal',''),this.container.innerHTML='',this.start()}},{key:'start',value:function(){var k=_asyncToGenerator(regeneratorRuntime.mark(function l(){var m,n,o,p,q,r,s,t;return regeneratorRuntime.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this._wait(this.startDelay);case 2:m=!0,n=!1,o=void 0,v.prev=3,q=this.lines[Symbol.iterator]();case 5:if(m=(p=q.next()).done){v.next=29;break}if(r=p.value,s=r.getAttribute(this.pfx),t=r.getAttribute(this.pfx+'-delay')||this.lineDelay,'input'!=s){v.next=15;break}return r.setAttribute(this.pfx+'-cursor',this.cursor),v.next=11,this.type(r);case 11:return v.next=13,this._wait(t);case 13:v.next=25;break;case 15:if('progress'!=s){v.next=22;break}return v.next=18,this.progress(r);case 18:return v.next=20,this._wait(t);case 20:v.next=25;break;case 22:return this.container.appendChild(r),v.next=25,this._wait(t);case 25:r.removeAttribute(this.pfx+'-cursor');case 26:m=!0,v.next=5;break;case 29:v.next=34;break;case 31:v.prev=31,v.t0=v['catch'](3),n=!0,o=v.t0;case 34:v.prev=34,v.prev=35,!m&&q.return&&q.return();case 37:if(v.prev=37,!n){v.next=40;break}throw o;case 40:return v.finish(37);case 41:return v.finish(34);case 42:case'end':return v.stop();}},l,this,[[3,31,34,42],[35,,37,41]])}));return function(){return k.apply(this,arguments)}}()},{key:'type',value:function(){var k=_asyncToGenerator(regeneratorRuntime.mark(function l(m){var n,o,p,q,r,s,t,u;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:n=[].concat(_toConsumableArray(m.textContent)),o=m.getAttribute(this.pfx+'-typeDelay')||this.typeDelay,m.textContent='',this.container.appendChild(m),p=!0,q=!1,r=void 0,w.prev=3,u=n[Symbol.iterator]();case 5:if(p=(s=u.next()).done){w.next=13;break}return t=s.value,w.next=9,this._wait(o);case 9:m.textContent+=t;case 10:p=!0,w.next=5;break;case 13:w.next=18;break;case 15:w.prev=15,w.t0=w['catch'](3),q=!0,r=w.t0;case 18:w.prev=18,w.prev=19,!p&&u.return&&u.return();case 21:if(w.prev=21,!q){w.next=24;break}throw r;case 24:return w.finish(21);case 25:return w.finish(18);case 26:case'end':return w.stop();}},l,this,[[3,15,18,26],[19,,21,25]])}));return function(){return k.apply(this,arguments)}}()},{key:'progress',value:function(){var k=_asyncToGenerator(regeneratorRuntime.mark(function l(m){var n,o,p,q,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=m.getAttribute(this.pfx+'-progressLength')||this.progressLength,o=m.getAttribute(this.pfx+'-progressChar')||this.progressChar,p=o.repeat(n),m.textContent='',this.container.appendChild(m),q=1;case 3:if(!(q<p.length+1)){t.next=11;break}return t.next=6,this._wait(this.typeDelay);case 6:r=Math.round(100*(q/p.length)),m.textContent=p.slice(0,q)+' '+r+'%';case 8:q++,t.next=3;break;case 11:case'end':return t.stop();}},l,this)}));return function(){return k.apply(this,arguments)}}()},{key:'_wait',value:function(k){return new Promise(function(l){return setTimeout(l,k)})}}]),i}();if(document.currentScript.hasAttribute('data-termynal-container')){var containers=document.currentScript.getAttribute('data-termynal-container');containers.split('|').forEach(function(i){return new Termynal(i)})}